{"version":3,"sources":["components/Person.js","components/Filter.js","components/PersonForm.js","components/Persons.js","services/PersonServices.js","App.js","index.js"],"names":["Person","props","name","number","onClick","handleDelete","personId","Filter","value","filterText","onChange","handleFilter","PersonForm","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","showPersons","baseUrl","axios","get","newObject","post","id","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterText","addNotification","setAddNotification","errorMessage","setErrorMessage","fetchData","console","log","PersonService","then","response","data","useEffect","handleDeleteButton","personArray","filter","p","length","confirmMessage","window","confirm","filteredPersons","person","toUpperCase","includes","message","className","event","target","preventDefault","existingPerson","personObject","setTimeout","catch","error","concat","map","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fbe58855.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Person = props => {\r\n  return (\r\n    <div>\r\n      {props.name} &nbsp; {props.number}\r\n      <button onClick={() => props.handleDelete(props.personId)}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\n\r\nconst Filter = props => {\r\n  return (\r\n    <div>\r\n      filter shown with{\" \"}\r\n      <input value={props.filterText} onChange={props.handleFilter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = props => {\r\n  return (\r\n    <form onSubmit={props.onSubmit}>\r\n      <div>\r\n        name: <input value={props.newName} onChange={props.handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = props => {\r\n  return <div>{props.showPersons()}</div>;\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl);\r\n};\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject);\r\n};\r\n\r\nconst deleted = id => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  update: update,\r\n  deleted: deleted\r\n};\r\n","import React, { useState, useEffect } from \"react\";\nimport Person from \"./components/Person\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport PersonService from \"./services/PersonServices\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterText, setFilterText] = useState(\"\");\n  const [addNotification, setAddNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const fetchData = () => {\n    console.log(\"effect\");\n    PersonService.getAll().then(response => {\n      console.log(\"promise fulfilled\");\n      console.log(\"data :\", response.data);\n      setPersons(response.data);\n    });\n  };\n\n  useEffect(fetchData, []);\n\n  const handleDeleteButton = id => {\n    console.log(id);\n    const personArray = persons.filter(p => p.id === id);\n    console.log(personArray);\n    if (personArray.length === 1) {\n      console.log(\"hello\", personArray[0]);\n      let confirmMessage = window.confirm(`Delete ${personArray[0].name} ?`);\n      console.log(\"confirm message\", confirmMessage);\n      if (confirmMessage === true) {\n        PersonService.deleted(id).then(response => {\n          console.log(\"delete person\", response.data);\n          fetchData();\n        });\n      }\n    }\n  };\n\n  const rows = () =>\n    filteredPersons.map(person => (\n      <Person\n        key={person.id}\n        personId={person.id}\n        name={person.name}\n        number={person.number}\n        handleDelete={handleDeleteButton}\n      />\n    ));\n\n  const handleNameChange = event => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilter = event => {\n    console.log(event.target.value);\n    setFilterText(event.target.value);\n  };\n\n  const filteredPersons = persons.filter(person =>\n    person.name.toUpperCase().includes(filterText.toUpperCase())\n  );\n\n  const addPerson = event => {\n    event.preventDefault();\n    const existingPerson = persons.filter(person => person.name === newName);\n    if (existingPerson.length > 0) {\n      let confirmMessage = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      console.log(\"confirm message\", confirmMessage);\n      if (confirmMessage === true) {\n        const personObject = {\n          name: newName,\n          number: newNumber\n        };\n\n        PersonService.update(existingPerson[0].id, personObject)\n          .then(response => {\n            console.log(\"response data: \", response.data);\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setAddNotification(`Updated the number for ${newName}`);\n            setTimeout(() => {\n              setAddNotification(null);\n            }, 5000);\n            fetchData();\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Information of '${newName}' has already been removed from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n            fetchData();\n          });\n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      };\n\n      PersonService.create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response.data));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setAddNotification(`Added ${newName}`);\n          setTimeout(() => {\n            setAddNotification(null);\n          }, 5000);\n        })\n        .catch(error => {\n          console.log(error.response.data.error);\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n          fetchData();\n        });\n    }\n  };\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null;\n    }\n\n    return <div className=\"addMessage\">{message}</div>;\n  };\n\n  const ErrorMessage = ({ message }) => {\n    if (message === null) {\n      return null;\n    }\n\n    return <div className=\"error\">{message}</div>;\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={addNotification} />\n      <ErrorMessage message={errorMessage} />\n\n      <Filter filterText={filterText} handleFilter={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        onSubmit={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons showPersons={rows} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}